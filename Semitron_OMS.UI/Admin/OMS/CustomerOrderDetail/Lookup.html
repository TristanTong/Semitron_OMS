<script type="text/javascript">
    $(function () {
        $("#divLookupCustomerOrderDetail button[type='submit']").click(function () {
            $("#divLookupCustomerOrderDetail table tbody").html("");
            var url = "/Handle/OMS/CustomerOrderDetailHandle.ashx";
            var InnerOrderNo = $("#divLookupCustomerOrderDetail p input[name='InnerOrderNo']").val();
            var CustomerCode = $("#divLookupCustomerOrderDetail p input[name='CustomerCode']").val();
            var CustOrderDateBegin = $("#divLookupCustomerOrderDetail p input[name='CustOrderDateBegin']").val();
            var CustOrderDateEnd = $("#divLookupCustomerOrderDetail p input[name='CustOrderDateEnd']").val();
            var data = data = {
                "meth": "GetCustomerOrderDetailUnOutStockList", "InnerOrderNo": InnerOrderNo, "CustomerCode": CustomerCode,
                "CustOrderDateBegin": CustOrderDateBegin, "CustOrderDateEnd": CustOrderDateEnd
            };

            var successFun = function (json) {
                if (!json || (json && json.State == "0")) {
                    alertMsg.error(json.Info);
                    return false;
                } else {
                    for (var i = 0; i < json.length; i++) {
                        $("#divLookupCustomerOrderDetail table tbody").append("<tr>"
                            + "<td width=\"50px\"> <a class=\"btnSelect\" href=\"javascript:$.bringBack({CustomerOrderDetailId:'"
                            + json[i].CustomerOrderDetailId + "', InnerOrderNO:'" + json[i].InnerOrderNO + "', CustomerOrderNO:'" + json[i].CustomerOrderNO
                            + "',CPN:'" + json[i].CPN + "', CustOrderDate:'" + json[i].CustOrderDate
                            + "',CustQuantity:'" + json[i].CustQuantity + "',PlanedQty:'" + json[i].PlanedQty
                            + "',UnOutStockQty:'" + json[i].UnOutStockQty
                            + "',CustomerCode:'" + json[i].CustomerCode + "',CustomerName:'" + json[i].CustomerName + "'})\" title=\"查找带回\">选择</a> </td><td width=\"36px\">"
                            + json[i].CustomerOrderDetailId + "</td> <td width=\"60px\">" + json[i].InnerOrderNO + "</td> <td width=\"101px\">"
                            + json[i].CustomerOrderNO + "</td><td width=\"101px\">"
                            + json[i].CPN + "</td> <td width=\"60px\">" + json[i].CustOrderDate + "</td> <td width=\"60px\">"
                            + json[i].InnerSalesMan + "</td><td width=\"59px\">" + json[i].AssignToInnerBuyer + "</td> <td width=\"59px\">"
                            + json[i].UnOutStockQty + "</td><td width=\"59px\">" + json[i].CustQuantity + "</td> <td width=\"59px\">"
                            + json[i].PlaningQty + "</td><td width=\"59px\">" + json[i].DoingOutStockQty + "</td> <td width=\"59px\">"
                            + json[i].AlreadyQty + "</td> <td width=\"59px\">"
                            + json[i].CustomerCode + "</td><td>" + json[i].CustomerName + "</td></tr>");
                    }

                    return true;
                }
            };
            var errorFun = function (x, e) {
                alertMsg.error(x.responseText);
            };
            JsAjax(url, data, successFun, errorFun);
            return false;
            return false;
        });
    });
</script>

<div class="pageContent">
    <div class="pageFormContent" layouth="30" id="divLookupCustomerOrderDetail">
        <div>
            <label>内部订单号：</label>
            <input name="InnerOrderNo" type="text" size="15" value="" />
        </div>
        <div>
            <label>客户编码：</label>
            <input name="CustomerCode" type="text" size="15" value="" />
        </div>
        <div>
            <label>订单时间：</label>
            <input type="text" name="CustOrderDateBegin" class="date textInput valid" size="8" readonly="readonly">
            <a class="inputDateButton" href="javascript:;">选择</a>
            <input type="text" name="CustOrderDateEnd" class="date textInput valid" size="8" readonly="readonly">
            <a class="inputDateButton" href="javascript:;">选择</a>
            <span class="inputInfo">选择区间</span>
        </div>
        <div class="subBar">
            <ul>
                <li>
                    <div class="buttonActive">
                        <div class="buttonContent">
                            <button type="submit">查询</button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="divider"></div>
        <div class="pageContent">
            <table class="table" layouth="118" layoutw="118" targettype="dialog" width="1400px">
                <thead>
                    <tr>
                        <th width="55px">查找带回</th>
                        <th width="40px">清单ID</th>
                        <th width="66px">内部订单号</th>
                        <th width="110px">客户订单号</th>
                        <th width="110px">客户型号</th>
                        <th width="66px">订单时间</th>
                        <th width="66px">公司销售</th>
                        <th width="66px">指定采购</th>
                        <th width="66px">未出库数量</th>
                        <th width="66px">订单数量</th>
                        <th width="66px">计划中数量</th>
                        <th width="66px">出库中数量</th>
                        <th width="66px">已出库数量</th>
                        <th width="66px">客户编码</th>
                        <th>客户名称</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

</div>

